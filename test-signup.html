<!DOCTYPE html>
<html>
<head>
    <title>Test VENUIN Signup</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, select { width: 300px; padding: 8px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        #result { margin-top: 20px; padding: 10px; background: #f8f9fa; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Test VENUIN Signup Flow</h1>
    
    <div class="form-group">
        <label>Email:</label>
        <input type="email" id="email" placeholder="user@example.com" value="test@venuin.com">
    </div>
    
    <div class="form-group">
        <label>Password:</label>
        <input type="password" id="password" placeholder="password" value="testpassword123">
    </div>
    
    <button onclick="testSignup()">Test Signup</button>
    <button onclick="testLogin()">Test Login</button>
    <button onclick="testOnboardingFlow()">Test Onboarding Flow</button>
    
    <div id="result"></div>

    <script>
        const apiBase = 'https://c02c92b1-51dd-4a6b-9e22-e3bc742400fd-00-phtiicfb709z.riker.replit.dev';
        
        async function testSignup() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch(`${apiBase}/api/auth/signup`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ email, password })
                });
                
                const result = await response.json();
                document.getElementById('result').innerHTML = `<h3>Signup Result:</h3><pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `<h3>Error:</h3><p>${error.message}</p>`;
            }
        }
        
        async function testLogin() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch(`${apiBase}/api/auth/login`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ email, password })
                });
                
                const result = await response.json();
                document.getElementById('result').innerHTML = `<h3>Login Result:</h3><pre>${JSON.stringify(result, null, 2)}</pre>`;
            } catch (error) {
                document.getElementById('result').innerHTML = `<h3>Error:</h3><p>${error.message}</p>`;
            }
        }
        
        async function testOnboardingFlow() {
            document.getElementById('result').innerHTML = `<h3>Testing Onboarding Flow...</h3>`;
            
            // Test fetching plans
            try {
                const plansResponse = await fetch(`${apiBase}/api/public/plans`);
                const plans = await plansResponse.json();
                
                document.getElementById('result').innerHTML += `<h4>Available Plans:</h4><pre>${JSON.stringify(plans, null, 2)}</pre>`;
                
                // Test creating tenant
                const tenantData = {
                    tenantName: "Test Venue",
                    tenantSlug: "test-venue",
                    industry: "Weddings & Events",
                    contactName: "Test User",
                    contactEmail: document.getElementById('email').value,
                    businessPhone: "555-123-4567",
                    businessAddress: "123 Test Street, Test City, TC 12345",
                    businessDescription: "A beautiful test venue for testing purposes",
                    featurePackageSlug: plans[0]?.slug || "starter"
                };
                
                const tenantResponse = await fetch(`${apiBase}/api/onboarding/tenant`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify(tenantData)
                });
                
                const tenantResult = await tenantResponse.json();
                document.getElementById('result').innerHTML += `<h4>Tenant Creation Result:</h4><pre>${JSON.stringify(tenantResult, null, 2)}</pre>`;
                
            } catch (error) {
                document.getElementById('result').innerHTML += `<h4>Error:</h4><p>${error.message}</p>`;
            }
        }
    </script>
</body>
</html>